## 22.02.04_C#프로퍼티

- 객체지향 언어는 `은닉성`을 표현할 수 있어야 함
  - 객체의 데이터가 의도하지 않게 오염되는 것을 막아야함
  - C++이나 java에서는 private이나 protected 접근 한정자를 이용해서 클래스 내의 필드를 외부에서 보이지 않게 감추고,
    - 이 필드에 접근하는 메소드들은 public으로 따로 제공
  - C#도 비슷하게 사용할 수 있지만 프로퍼티라는 것을 이용함

## 1.기본적인  방식

```c#
class MyClass
{
    private int myField;
    public int GetMyField(){return myField};
    public void SetMYField(int NewValue){myField = NewValue}
}

//사용
MyClass obj = new MyClass();
obj.SetMyField(3);
Console.WriteLine(obj.GetMyField());
```

- 컴파일에 문제 없고, 우리가 원하는 대로 은닉성 지키면서 필드를 읽고 씀
  - 자바의 경우 완벽한 정석임ㄴ

## 2. 메소드보다 프로퍼티

- 프로퍼티 사용법

  ```c#
  class 클래스이름
  {
      데이터형식 필드이름;
      접근한정자 데이터형식 프로퍼티이름;
      {
          get
          {
              return 필드이름;
  		}
          set
          {
              필드이름 = value;
  		}
      }
  }
  ```

  - 여기서 get과 set을 일컬어 접근자라고 함
    - get은 필드로부터 값을 읽어오고
    - set은 필드에 값을 할당
      - set 접근자안에 있는 value 키워드를 주목하면 우리가 선언안해도 그냥 암묵적으로 매개변수로 간주함

- 이전 소스 프로퍼티로 변경

  ```c#
  class MyClass
  {
      private int myField;
      public int MyField
      {
          get
          {
              return myField;
  		}	
          set
          {
              myField = value;
          }
  	}
  }
  
  //사용
  Myclass obj = new MyClass();
  obj.MyField = 3;
  Console.WriteLine(obj.MyField);
  ```

  

  - set을 구현하지 않게 된다면 그냥 자연스럽게 읽기 전용 프로퍼티가됨

### 2.1 프로퍼티를 이용한 예제 프로그램

```c#
using System;

namespace Property
{
    class BirthdayInfo
    {
        private string name;
        private DateTime birthday;
        
        public string Name;
        {
            get
            {
                return name;
			}
            set
            {
                name = value;
			}
		}
        
        public DateTime Birthday
        {
            get
            {
                return birthday;
			}
            set
            {
                birthday = value;
			}
		}
        
        public int Age
        {
			get
            {
                return new DateTime(DateTime.Now.Subtract(birthday).Ticks).Year;
			}
        }
	}
    
    class MainApp
    {
        static void Main(string[] args)
        {
            BirthdayInfo birth = new BirthdayInfo();
            birth.Name = "경민";
            birth.Birthday = new DateTime(1992,08,28);
            
            Console.WriteLine($"Name : {birth.Name}");
            Console.WriteLine($"Birthday : {birth.Birthday.ToShortDateString()}");
            Console.WriteLine($"Age : {birth.Age}");
        }
	}
}
```

## 3.자동구현 프로퍼티

- before

  ```c#
  public class NameCard
  {
      private string name;
      private string phoneNumber;
      
      public string Name
      {
          get{return name;}
          set{name = value;}
  	}
      
      public string PhoneNumber
      {
          get{return phoneNumber;}
          set{phoneNumber = value;}
  	}
  }
  ```

  - 중복 코드를 작성하고 있다는 기분이 듦
    - 그냥 읽고 쓰기만 하는데 이를 위한 대책으로 자동 프로퍼티 C#3.0부터 도입

- after | 자동 프로퍼티 적용

  ```c#
  public class NameCard
  {
      private string name;
      private string phoneNumber;
      
      public string Name
      {
          get; set;
  	}
      
      public string PhoneNumber
      {
          get; set;
  	}
  }
  ```

- upgrade | C#7.0 프로퍼티 선언가 동시에 초기화 수행

  - 프로퍼티 초깃값이 필요할 때 생성자에 초기화 코드를 작성하는 수고 덜음

  ```c#
  public class NameCard
  {
      public string Name{get; set;} = "Unknowmn";
      public string PhoneNumber{get; set;} = "000-0000";
  }
  ```

### 3.1 자동프로퍼티로 구현

```c#
using System;

namespace Property
{
    class BirthdayInfo
    {
        public string Name{get; set;} = "Unknown";
        public DateTime Birthday {get; set;} = new DateTime(1,1,1,);
        public int Age
        {
			get
            {
                return new DateTime(DateTime.Now.Subtract(birthday).Ticks).Year;
			}
        }
	}
    
    class MainApp
    {
        static void Main(string[] args)
        {
            BirthdayInfo birth = new BirthdayInfo();
            Console.WriteLine($"Name : {birth.Name}");
            Console.WriteLine($"Birthday : {birth.Birthday.ToShortDateString()}");
            Console.WriteLine($"Age : {birth.Age}");
            
            birth.Name = "경민";
            birth.Birthday = new DateTime(1992,08,28);
            
            Console.WriteLine($"Name : {birth.Name}");
            Console.WriteLine($"Birthday : {birth.Birthday.ToShortDateString()}");
            Console.WriteLine($"Age : {birth.Age}");
        }
	}
}
```

