## 22.03.20_라즈베리파이_나스설정해보기

## 1.이미지만들기

```dockerfile
docker run --name OpenMediaVault -itd -v ./path/to/data:/data:rw -P ikogan/openmediavault:dev
```

- 이미지 생성을 위한 도커파일

```sh
docker build --platform linux/x86_64 --tag km/openmediavault .
```

- --platform linux/x86_64 이를 붙여준 이유는 아래와 같이 에러가 발생했기 때문

  - ![image-20220320144713098](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220320144713098.png)
    - 위를 붙여주면 해결된다.

- ```
  docker run --name OpenMediaVault --platform linux/x86_64 -itd -h openmediavault.example.test -v /path/to/data:/data:Z -P ikogan/openmediavault
  ```

```
version: '3.1'

services:
  nas:
    image: ikogan/openmediavault:dev
    restart: always
    ports:
      - 5000:8080                 
    volumes:
      - ./path/to/data:/data:Z
      - ./sql/InitDb.sql:/docker-entrypoint-initdb.d/InitDb.sql
```

- 위와 같이 해보려고 했는데 인식안되는 점도 있었고, 무엇보다 우분투 환경에서 안된다고 했다
  - 데비안 환경만 지원하다고 하여 라즈베리os를 밀고 다시 시작했음

## 2.직접설치하기

```sh
sudo wget -O - https://raw.githubusercontent.com/OpenMediaVault-Plugin-Developers/installScript/master/install | sudo bash
```

- 위와 같이 명령어를 입력해주면 omv가 설치가 되는데
  - 데비안이여야 설치될것이다 아니면 라즈베리언이어야 가능하다.
    - 위는 주의하자



![image-20220320222221846](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220320222221846.png)

- 설정한 도메인으로 들어가면 위와 같이 들어갈수 있음 
  - 초기 ID :	admin
  - 초기 PW : openmediavault

![image-20220320222800816](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220320222800816.png)

- 시스템에 workbench에 자동 로그아웃을 비활성화 해주면됨

![image-20220320224435943](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220320224435943.png)

- 우선 테스트를 위해 usb이지만 무튼 원하는 것을 포맷해서 저렇게 저장소에 디스크 가면 인식이 되는것을 볼 수 있음





## 4. 도커설치



![image-20220321004102511](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220321004102511.png)

- 시스템에 omv-extras클릭

![image-20220321004129128](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220321004129128.png)

- 도커 클릭

![image-20220321004157984](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220321004157984.png)

- 설치를 클릭해준다.
- 그리고 기다리면 설치가됨

## 5. 포테이너

- 도커를 편하게 볼수 있는 gui 
  - 도커 for windows에서 생성된 컨테이너를 볼 수 있는것과 비슷

- 포테이너는 도커를 WebGUI 형태로 관리할 수 있게 만들어주는 소프트웨어
  - 기존에는 길고 복잡한 명령어로 도커를 관리해야 했지만, 포테이너를 설치하면 쉽고 간단하게 도커 관리가 가능함

### 5.1 설치 

![image-20220321004741949](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220321004741949.png)

 

- 포테이너 클릭

![image-20220321004805707](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220321004805707.png)

- 설치가 완료되면 저 포트를 입력해서 들어가면 됨

![image-20220321010017761](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220321010017761-7792018.png)

- 저렇게 나오는데 저기서 create user 생성

![image-20220321010055600](22.03.20_라즈베리파이_나스설정해보기.assets/image-20220321010055600.png)

- 들어가면 위와 같이 화면이 나옴
